<div th:fragment="sidebar">
  <aside class="sidebar" style="position:relative;">
    <div class="sidebar-logo">
      <a th:href="@{/}" class="sidebar-logo-link">
        <img src="/assets/images/mainlogo.png" alt="Office ERP 로고" />
      </a>
    </div>

    <div class="sidebar-menu-wrap">
      <nav class="sidebar-menu">
        <ul>
          <li class="menu-item active">
            <a th:href="@{/}" class="active">
              <img src="/assets/images/dashboard.png" class="menu-icon" alt="대시보드" />
              <span class="menu-text">대시보드</span>
            </a>
          </li>

          <li class="menu-item has-sub">
            <a href="#" class="menu-toggle">
              <img src="/assets/images/erp.png" class="menu-icon" alt="ERP 관리" />
              <span class="menu-text">ERP 관리</span>
              <span class="arrow">&#9654;</span>
            </a>
            <ul class="submenu">
              <li><a th:href="@{/sales/orderList}">판매주문</a></li>
              <li><a th:href="@{/purchase/orderList}">구매 / 발주</a></li>
              <li><a th:href="@{/product/productView}">상품관리</a></li>
              <li><a th:href="@{/product/stock}">재고관리</a></li>
              <li><a th:href="@{/client/list}">거래처관리</a></li>
            </ul>
          </li>

          <li class="menu-item has-sub">
            <a href="#" class="menu-toggle">
              <img src="/assets/images/insa.png" class="menu-icon" alt="인사관리" />
              <span class="menu-text">인사관리</span>
              <span class="arrow">&#9654;</span>
            </a>
            <ul class="submenu">
              <li><a th:href="@{/personnel/department}">부서관리 / 조직도</a></li>
              <li><a th:href="@{/personnel/employee}">직원관리</a></li>
              <li><a th:href="@{/personnel/attendance}">근태관리</a></li>
              <li><a th:href="@{/personnel/vacation}">휴가관리</a></li>
              <li><a th:href="@{/personnel/salary}">급여관리</a></li>
              <li><a th:href="@{/personnel/evaluation}">평가관리</a></li>
              <li><a th:href="@{/personnel/statistics}">인사통계</a></li>
            </ul>
          </li>

          <li class="menu-item has-sub">
            <a href="#" class="menu-toggle">
              <img src="/assets/images/community.png" class="menu-icon" alt="커뮤니티" />
              <span class="menu-text">커뮤니티</span>
              <span class="arrow">&#9654;</span>
            </a>
            <ul class="submenu">
              <li><a th:href="@{/notice/noticeList}">공지사항</a></li>
              <li><a th:href="@{/chat/roomList}">채팅</a></li>
              <li><a th:href="@{/calendar}">캘린더</a></li>
            </ul>
          </li>

          <li class="menu-item has-sub">
            <a href="#" class="menu-toggle">
              <img src="/assets/images/insa.png" class="menu-icon" alt="마이페이지" />
              <span class="menu-text">마이페이지</span>
              <span class="arrow">&#9654;</span>
            </a>
            <ul class="submenu">
              <li><a th:href="@{/member/info}">사원정보</a></li>
              <li><a href="#">개인근태정보</a></li>
              <li><a th:href="@{/personnel/myVacation}">개인휴가정보</a></li>
              <li><a href="#">급여정보</a></li>
            </ul>
          </li>
        </ul>
      </nav>
    </div>

    <div class="sidebar-bottom">
      <div class="worktime-box">
        <div class="date-time" id="currentDateTime"></div>
        <div class="worktime-row">
          <span>출근</span>
          <input type="time" id="displayCheckInTime" class="check-time" readonly />
        </div>
        <div class="worktime-row">
          <span>퇴근</span>
          <input type="time" id="displayCheckOutTime" class="check-time" readonly />
        </div>
      </div>
	  
	  <form id ="worktimeForm" th:action="@{/personnel/clockIn}" method="post">
	  <input type="hidden" id="checkInTimeInput" name="checkIntime"/>
	  <input type="hidden" id="checkOutTimeInput" name="checkOuttime"/>	  
	  <input type="hidden" id="statusInput" name="status"/>	  
	  
	  </form>
	  
      <div class="worktime-buttons">
        <button type="button" id="checkInBtn" onclick="handleCheckIn()">출근하기</button>
        <button type="button" id="checkOutBtn" onclick="handleCheckOut()" disabled>퇴근하기</button>
      </div>

      <div class="profile-box">
        <img class="profile-img"
             th:src="${loginMember?.photo_name != null ? '/uploads/' + loginMember.photo_name : '/assets/image_bundle/face.png'}"
             alt="프로필" />
        
        <div class="profile-info">
          <span class="profile-name" th:text="${loginMember?.user_name ?: ''}">이름</span>
          <div class="profile-row">
            <span>
              <span class="profile-subinfo" th:text="${loginMember?.department_name ?: '부서'}">부서</span>
              <span class="profile-subinfo" th:if="${loginMember != null && positionMap[loginMember.position_num] != null}" 
                    th:text="(${positionMap[loginMember.position_num]})">(직책)</span>
            </span>
            <form method="post" th:action="@{/member/logout}" class="profile-logout-form">
              <button type="submit" class="profile-btn" title="로그아웃">
                <img src="/assets/images/logout1.png" alt="로그아웃" style="width:20px;height:20px;" />
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
  </aside>
</div>

<style>
  .submenu a {
    font-weight: 700 !important;
  }
</style>