<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">

<head>
<meta charset="UTF-8">
<title>Office ERP - 근태관리</title>
<link rel="stylesheet" th:href="@{/assets/css/main.css}">
<link rel="stylesheet" th:href="@{/assets/css/yj/attendanceList.css}">


</head>
<body>
	<div layout:fragment="content" class="page-main">
		<div class="dashboard-wrapper">
			<!-- 사이드바 -->
			<th:block th:replace="fragments/nav_sidebar :: sidebar"></th:block>

			<!-- 메인 컨텐츠 -->
			<main class="main-content">
				<div class="page-title">
					<h1
						style="color: #1976D2; font-weight: bold; font-size: 1.5rem; margin-bottom: 24px; text-align: left;">인사관리
						- 근태관리</h1>
				</div>
				<!-- 조회 조건 카드 -->
				<section class="card-section" style="margin-bottom: 24px;">
					<div class="card"
						style="border-radius: 12px; background: #fff; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06); padding: 24px;">
						<div class="card-header"
							style="font-weight: bold; font-size: 1.1rem; margin-bottom: 18px;">조회
							조건</div>
						<form th:action="@{/personnel/attendancesearch}" class="search-form" method="get"
							style="display: flex; flex-direction: column; gap: 10px; background: none;">
							<div class="search-row"
								style="display: flex; align-items: center; gap: 16px; background: none;">
								<label style="width: 80px; color: #222; font-weight: 600;">기간</label>
								<input type="date" name="startDate"
									style="width: 140px; background: #f1f3f6; border: none; border-radius: 6px; padding: 7px 12px;">
								<span style="margin: 0 4px; color: #888;">~</span> <input
									type="date" name="endDate"
									style="width: 140px; background: #f1f3f6; border: none; border-radius: 6px; padding: 7px 12px;">
								<button type="submit" class="btn"
									style="background: #444; color: #fff; border: none; border-radius: 6px; margin-left: 8px; min-width: 56px;">검색</button>
							</div>
							<div class="search-row"
								style="display: flex; align-items: center; gap: 16px; background: none;">
								<label style="width: 80px; color: #222; font-weight: 600;">직원</label>
								<input type="text" name="empName" placeholder="직원명"
									style="width: 180px; background: #f1f3f6; border: none; border-radius: 6px; padding: 7px 12px;">
								<button type="submit" class="btn"
									style="background: #444; color: #fff; border: none; border-radius: 6px; margin-left: 8px; min-width: 56px;">검색</button>
								</div>
								<div class="search-row"
								    style="display: flex; align-items: center; gap: 16px; background: none;">		
								<label style="width: 80px; color: #222; font-weight: 600;">상태</label>
								<input type="text" name="status" placeholder="근태종류"
									style="width: 180px; background: #f1f3f6; border: none; border-radius: 6px; padding: 7px 12px;">
								<button type="submit" class="btn"
									style="background: #444; color: #fff; border: none; border-radius: 6px; margin-left: 8px; min-width: 56px;">검색</button>				
							</div>
							<div
								style="display: flex; justify-content: flex-end; margin-top: 6px; background: none;">
								<button type="submit" class="btn btn-primary"
									style="min-width: 90px; border: none;">전체 검색</button>
							</div>
						</form>
					</div>
				</section>
				<!-- 근태 관리 카드 -->
				<section class="card-section">
					<div class="card"
						style="border-radius: 12px; box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06); padding: 24px;">
						<div class="card-header"
							style="font-weight: bold; font-size: 1.1rem; margin-bottom: 18px; display: flex; justify-content: space-between; align-items: center;">
							<span>근태 관리</span>
							<div style="display: flex; gap: 8px;">
								<button class="btn btn-secondary"
									onclick="location.href='/personnel/List'">목록 보기</button>
								<button class="btn btn-primary"
									onclick="location.href='/personnel/Form'">근태 등록</button>
							</div>
						</div>
						<div class="table-container">
							<table class="attendance-table">
								<thead>
									<tr>
										<th><input type="checkbox"></th>
										<th>날짜</th>
										<th>이름</th>
										<th>상태</th>
										<th>출근시간</th>
										<th>퇴근시간</th>
										<th>메모</th>
										<th>관리</th>
									</tr>
								</thead>
								<tbody>
									<tr th:each="attendance : ${list}">
										<td><input type="checkbox"></td>
										<td th:text="${attendance.workDate}"></td>
										<td th:text="${attendance.empName}"></td>
										<td th:text="${attendance.statusName}"></td>
										<td th:text="${attendance.checkIntime}"></td>
										<td th:text="${attendance.checkOuttime}"></td>
										<td th:text="${attendance.notes}"></td>
										<td>
											<button class="manage-btn edit"
											    th:attr="data-id=${attendance.attendanceId}"
												th:onclick="|location.href='/personnel/updateForm?attendanceId=${attendance.attendanceId}'|">수정</button>
											<button class="manage-btn delete"
												th:data-id="${attendance.attendanceId}"
												onclick="deleteAttendance(this)">삭제</button>
										</td>
									</tr>
								</tbody>
								<script type="text/javascript">
									function deleteAttendance(btn) {
										const attendanceId = btn
												.getAttribute('data-id');
										if (confirm('삭제하시겠습니까?')) {
											location.href = '/personnel/delete?attendanceId='
													+ attendanceId;
										}
									};
								</script>
							</table>
						</div>
					</div>
				</section>
			</main>
		</div>
	</div>
	<div layout:fragment="pageScript"></div>
	<script th:src="@{/assets/js/sidebar.js}"></script>
</body>
</html>